<!DOCTYPE html>
<html>

<meta charset="UTF-8">
<style>
    div{
        margin: auto;
  width: 50%;
  border: 3px solid white;
  padding: 10px;
    }
</style>
<body>





<script>

//-----------------------------------------------------------------------------
// global variables
//-----------------------------------------------------------------------------    

 file='x';
 ans_key = '';
 window.onload=init();
//-----------------------------------------------------------------------------
//
//-----------------------------------------------------------------------------
   
function init() {
  //readTextFile();
  doGet("study_material/germanCH1.txt");
  
 
 
  
}

//-----------------------------------------------------------------------------
//
//-----------------------------------------------------------------------------
var page=1;
function parseFile(){
    //var lines = file.split("\\n");
    //document.getElementById("file").innerHTML=window.file;
    var both=file[page].split("====");
    document.getElementById("que").innerHTML=both[1];

     ans_key = both[0].trim();
    document.getElementById("ans_key").innerHTML=ans_key;
}

//-----------------------------------------------------------------------------
//page
//-----------------------------------------------------------------------------
function readTextFile() {
  var rawFile = new XMLHttpRequest();
  //study_material/germanCH1.txt 
  
  rawFile.onreadystatechange = function() {
    if (rawFile.status === 200 || rawFile.status == 4) {
     
       file = rawFile.responseText.split("\n");
        
        parseFile();

    }
  }

  rawFile.open("GET", "study_material/germanCH1.txt", true);
  rawFile.setRequestHeader("Content-Type", "text/plain");
  rawFile.send(null);
}

//-----------------------------------------------------------------------------
//
//-----------------------------------------------------------------------------
 async  function doGet(url) {
      let response = await fetch(url);

    console.log(response.status); // 200
    console.log(response.statusText); // OK

    if (response.status === 200) {
        let data = await response.text();
        alert(data);
        // handle data
    }
}

//-----------------------------------------------------------------------------
//
//-----------------------------------------------------------------------------
function checkInput(input){
    if(input==""){
        return;
    }
    console.log(input+'|'+ans_key);
    var check=interpolate(input) ;
    if(compare(check,ans_key)){
        document.getElementById("feedback").innerHTML='yes';
    }
}

//-----------------------------------------------------------------------------
//
//-----------------------------------------------------------------------------
function compare(left,right){
    return left === right;
}


//-----------------------------------------------------------------------------
// german has special letters like ä ö ü ß Ä Ö Ü 
// this function takes m`ar`s and turns it to mäß
//  example : m`ar`s => mäß
//-----------------------------------------------------------------------------
function interpolate(text){
    text=text.replace("`a","ä");
    text=text.replace("`o","ö");
    text=text.replace("`u","ü");
    text=text.replace("`s","ß");
    text=text.replace("`A","Ä");
    text=text.replace("`O","ß");
    text=text.replace("`U","Ü");
    return text;
}
</script>
<div>
<span id='que'></span>

<input type="text" onkeyup='checkInput(this.value)'/> 
<span id='feedback'></span>
<span id='ans_key'></span>
</div>
</body>
</html>
